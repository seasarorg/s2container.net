<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- don't edit start -->
<head><title>Seasar - DI Container with AOP - </title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<link href="seasar_b.css" type="text/css" rel="stylesheet" media="screen"><script src="seasar_b.js" type="text/JavaScript" language="JavaScript"></script>
</head><body onload="preload('en')">
<table width="100%" border="0" cellspacing="0" cellpadding="0" align="left"><tr>
<td align="left" valign="top" width="780"><table width="780" border="0" cellspacing="0" cellpadding="0" class="white">
<tr><td colspan="7"><img height="5" width="780" src="images/top01_b.gif" alt=""></td></tr>
<tr><td><img height="117" width="235" src="images/top02_b.gif" alt="Seasar"></td>
<td colspan="3"><img height="117" width="289" src="images/top03.gif" alt="DI Container with AOP"></td>
<td colspan="3"><img height="117" width="256" src="images/spacer.gif" alt=""></td>
</tr><tr><td rowspan="2"><img src="images/top04.gif" alt="" height="49" width="235"></td>
<td><a href="http://www.seasar.org/en/index.html"><img src="images/menu01_b_en.gif" height="30" width="78" border="0" alt="" id="menu01" onmouseover="swap(1)" onmouseout="restore(1)"></a></td>
<td><a href="http://www.seasar.org/en/projects.html"><img src="images/menu02_b_en.gif" height="30" width="101" border="0" alt="" id="menu02" onmouseover="swap(2)" onmouseout="restore(2)"></a></td>
<td><a href="http://www.seasar.org/en/products.html"><img src="images/menu06_b_en.gif" height="30" width="110" border="0" alt="" id="menu06" onmouseover="swap(6)" onmouseout="restore(6)"></a></td>
<td><a href="http://www.seasar.org/en/documents.html"><img src="images/menu04_b_en.gif" height="30" width="109" border="0" alt="" id="menu04" onmouseover="swap(4)" onmouseout="restore(4)"></a></td>
<td><a href="http://www.seasar.org/en/resources.html"><img src="images/menu05_b_en.gif" height="30" width="113" border="0" alt="" id="menu05" onmouseover="swap(5)" onmouseout="restore(5)"></a></td>
<!--
<td><img src="images/menu07_b_en.gif" height="30" width="109" border="0" alt=""  id="menu07" onmouseover="swap(7)" onmouseout="restore(7)"></td>
//-->
<td><img height="30" width="34" src="images/menu06.gif" alt=""></td></tr><tr>

<td colspan="6"><img height="19" width="545" src="images/spacer.gif" alt=""></td></tr></table>
<table  width="780" border="0" cellspacing="0" cellpadding="0" class="menu">
<tr align="left" valign="top"><td width="14"><img height="14" width="14" src="images/spacer.gif" alt=""></td><td width="740" class="main">
<!-- don't edit end --><!-- document start -->

<a href="index.html">S2Container.NET TOP page</a><p /><p />
<h2>S2Container.NET S2ADO</h2>

<p>S2ADO was created to enable developers to freely execute SQL commands without the complexity of using ADO.NET.</p>

<ul>
<li><a href="#DML">Data Manipulation</a></li>
<ul>
<li><a href="#BeanListDataReaderHandler">Query(BeanList)</a></li>
<li><a href="#BeanDataReaderHandler">Query(Bean)</a></li>
<li><a href="#DictionaryListDataReaderHandler">Query(DictionaryList)</a></li>
<li><a href="#DictionaryDataReaderHandler">Query(Dictionary)</a></li>
<li><a href="#BasicUpdateHandler">Update</a></li>
</ul>

<li><a href="#NullValue">NULL Handling</a>
<ul>
<li><a href="#NullValueNHibernate">Nullables in NHibernateContrib</a></li>
<li><a href="#NullValueSqlTypes">Null in System.Data.SqlTypes</a></li>
<li><a href="#NullValueNullable">System.Nullable(.NET 2.0 or higher)</a></li>
</ul>

<li><a href="#ParameterMark">Parameter Marker(@, :, ?)</a>
</ul>

<h2><a name="DML">Data Manipulation</a></h2>

<h3><a name="BeanListDataReaderHandler">Query(BeanList)</a></h3>
<p>Let's try querying several objects. To query, BasicSelectHandler is used. It has the following properties:</p>

<h4>Seasar.Extension.ADO.Impl.BasicSelectHandler</h4>
<table border="1">
<tr bgcolor="#d1f3f4" align="center">
<th width="96">Property</th>
<th width="156">Description</th>
<th width="478" >S2Container Example</th>
</tr>
<tr>
<td>DataSource</td>
<td>DataSource</td>
<td>Set normally by default</td>
</tr>
<tr>
<td>Sql</td>
<td>SQL command to execute</td>
<td>&quot;SELECT * FROM emp&quot;</td>
</tr>
<tr>
<td>DataReaderHandler</td>
<td>Handler class to process System.Data.IDataReader</td>
<td>To return several objects, BeanListDataReaderHandler is used.
<pre>&lt;component
  class=&quot;Seasar.Extension.ADO.Impl.BeanListDataReaderHandler&quot;&gt;
  &lt;arg&gt;Seasar.Examples.Reference.ADO.Employee&lt;/arg&gt;
&lt;/component&gt;</pre>
</p>
</td>
</tr>
<tr>
<td>CommandTimeout</td>
<td>Time in seconds before command is executed. Set to -1 to disable.</td>
<td>&nbsp;</td>
</tr>
</table>

<h4>Seasar.Examples.Reference.ADO.SelectBeanList.dicon</h4>
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">&lt;</span><span class="html">components</span><span class="kwrd">&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">include</span> <span class="attr">path</span><span class="kwrd">="Seasar.Examples/Ado.dicon"</span> <span class="kwrd">/&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">name</span><span class="kwrd">="SelectBeanListClient"</span> <span class="attr">class</span><span class="kwrd">="Seasar.Examples.Reference.ADO.SelectBeanListClient"</span><span class="kwrd">/&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">name</span><span class="kwrd">="SelectBeanListHandler"</span> <span class="attr">class</span><span class="kwrd">="Seasar.Extension.ADO.Impl.BasicSelectHandler"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">property</span> <span class="attr">name</span><span class="kwrd">="Sql"</span><span class="kwrd">&gt;</span><br />"SELECT empno, ename, job, mgr, hiredate, sal, comm, deptno FROM emp"<span class="kwrd">&lt;/</span><span class="html">property</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">property</span> <span class="attr">name</span><span class="kwrd">="DataReaderHandler"</span><span class="kwrd">&gt;</span>
      <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">class</span><span class="kwrd">="Seasar.Extension.ADO.Impl.BeanListDataReaderHandler"</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">arg</span><span class="kwrd">&gt;</span>Seasar.Examples.Reference.ADO.Employee<span class="kwrd">&lt;/</span><span class="html">arg</span><span class="kwrd">&gt;</span>
      <span class="kwrd">&lt;/</span><span class="html">component</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">property</span><span class="kwrd">&gt;</span>
  <span class="kwrd">&lt;/</span><span class="html">component</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">components</span><span class="kwrd">&gt;</span>
</pre>

<h4>Seasar.Examples.Reference.ADO.SelectBeanListClient</h4>
C#
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">using</span> System;
<span class="kwrd">using</span> System.Collections;
<span class="kwrd">using</span> Seasar.Extension.ADO;
<span class="kwrd">using</span> Seasar.Framework.Container;
<span class="kwrd">using</span> Seasar.Framework.Container.Factory;

<span class="kwrd">namespace</span> Seasar.Examples.Reference.ADO
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> SelectBeanListClient
    {
        <span class="kwrd">private</span> <span class="kwrd">const</span> <span class="kwrd">string</span> PATH = <span class="str">"Seasar.Examples/Reference/ADO/SelectBeanList.dicon"</span>;

        <span class="kwrd">public</span> <span class="kwrd">void</span> Main()
        {
            IS2Container container = S2ContainerFactory.Create(PATH);
            container.Init();
            <span class="kwrd">try</span>
            {
                ISelectHandler handler = (ISelectHandler) container.GetComponent(<span class="str">"SelectBeanListHandler"</span>);
                IList result = (IList) handler.Execute(<span class="kwrd">null</span>);
                <span class="kwrd">for</span> (<span class="kwrd">int</span> i = 0; i &lt; result.Count; ++i)
                {
                    Console.Out.WriteLine(result[i]);
                }
            }
            <span class="kwrd">finally</span>
            {
                container.Destroy();
            }
        }
    }
}
</pre>

<h4>Result:</h4>
<pre>
DEBUG 2006-06-19 23:26:59,890 [9] Logical connection opened
DEBUG 2006-06-19 23:26:59,984 [9] Logical connection closed
7369, SMITH, CLERK, 7902, 1980/12/17 0:00:00, 800, , 20, 
7499, ALLEN, SALESMAN, 7698, 1981/02/20 0:00:00, 1600, 300, 30, 
7521, WARD, SALESMAN, 7698, 1981/02/22 0:00:00, 1250, 500, 30, 
7566, JONES, MANAGER, 7839, 1981/04/02 0:00:00, 2975, , 20, 
7654, MARTIN, SALESMAN, 7698, 1981/09/28 0:00:00, 1250, 1400, 30, 
7698, BLAKE, MANAGER, 7839, 1981/05/01 0:00:00, 2850, , 30, 
7782, CLARK, MANAGER, 7839, 1981/06/09 0:00:00, 2450, , 10, 
7788, SCOTT, ANALYST, 7566, 1982/12/09 0:00:00, 3000, , 20, 
7839, KING, PRESIDENT, , 1981/11/17 0:00:00, 5000, , 10, 
7844, TURNER, SALESMAN, 7698, 1981/09/08 0:00:00, 1500, 0, 30, 
7876, ADAMS, CLERK, 7788, 1983/01/12 0:00:00, 1100, , 20, 
7900, JAMES, CLERK, 7698, 1981/12/03 0:00:00, 950, , 30, 
7902, FORD, ANALYST, 7566, 1981/12/03 0:00:00, 3000, , 20, 
7934, MILLER, CLERK, 7782, 1982/01/23 0:00:00, 1300, , 10, 
</pre>
<p>If there is a bind variable, it is specified as the parameter to the Execute(object[]). Since there isn't any bind variable in this example, parameter is set to null.
S2Container will construct the components so it is only necessary to invoke the Execute() method.
If there is an underscore (_) included in the column name, it is mapped to a property whose name is the column name without the underscore character.
</p>

<h3><a name="BeanDataReaderHandler">Query(Bean)</a></h3>
<p>To just query 1 object, BasicSelectHandler is used in a similar manner as in the <a name="BeanListDataReaderHandler">Query(BeanList)</a> except BeanDataReaderHandler is used and an object is returned instead of a list.</p>

<h4>Seasar.Examples.Reference.ADO.SelectBean.dicon</h4>
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">&lt;</span><span class="html">components</span><span class="kwrd">&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">include</span> <span class="attr">path</span><span class="kwrd">="Seasar.Examples/Ado.dicon"</span> <span class="kwrd">/&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">name</span><span class="kwrd">="SelectBeanClient"</span> <span class="attr">class</span><span class="kwrd">="Seasar.Examples.Reference.ADO.SelectBeanClient"</span><span class="kwrd">/&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">name</span><span class="kwrd">="SelectBeanHandler"</span> <span class="attr">class</span><span class="kwrd">="Seasar.Extension.ADO.Impl.BasicSelectHandler"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">property</span> <span class="attr">name</span><span class="kwrd">="Sql"</span><span class="kwrd">&gt;</span><br />"SELECT empno, ename, job, mgr, hiredate, sal, comm, <br />deptno FROM emp WHERE empno = @empno"<span class="kwrd">&lt;/</span><span class="html">property</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">property</span> <span class="attr">name</span><span class="kwrd">="DataReaderHandler"</span><span class="kwrd">&gt;</span>
      <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">class</span><span class="kwrd">="Seasar.Extension.ADO.Impl.BeanDataReaderHandler"</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">arg</span><span class="kwrd">&gt;</span>Seasar.Examples.Reference.ADO.Employee<span class="kwrd">&lt;/</span><span class="html">arg</span><span class="kwrd">&gt;</span>
      <span class="kwrd">&lt;/</span><span class="html">component</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">property</span><span class="kwrd">&gt;</span>
  <span class="kwrd">&lt;/</span><span class="html">component</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">components</span><span class="kwrd">&gt;</span>
</pre>

<h4>Seasar.Examples.Reference.ADO.SelectBeanClient</h4>
C#
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">using</span> System;
<span class="kwrd">using</span> Seasar.Extension.ADO;
<span class="kwrd">using</span> Seasar.Framework.Container;
<span class="kwrd">using</span> Seasar.Framework.Container.Factory;

<span class="kwrd">namespace</span> Seasar.Examples.Reference.ADO
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> SelectBeanClient
    {
        <span class="kwrd">private</span> <span class="kwrd">const</span> <span class="kwrd">string</span> PATH = <span class="str">"Seasar.Examples/Reference/ADO/SelectBean.dicon"</span>;

        <span class="kwrd">public</span> <span class="kwrd">void</span> Main()
        {
            IS2Container container = S2ContainerFactory.Create(PATH);
            container.Init();
            <span class="kwrd">try</span>
            {
                ISelectHandler handler = (ISelectHandler) container.GetComponent(<span class="str">"SelectBeanHandler"</span>);
                Employee result = (Employee) handler.Execute(<span class="kwrd">new</span> <span class="kwrd">object</span>[] { 7788 });
                Console.Out.WriteLine(result);
            }
            <span class="kwrd">finally</span>
            {
                container.Destroy();
            }
        }
    }
}
</pre>

<h4>Result:</h4>
<pre>
DEBUG 2006-06-19 23:34:54,234 [9] Logical connection opened
DEBUG 2006-06-19 23:34:54,249 [9] Logical connection closed
7788, SCOTT, ANALYST, 7566, 1982/12/09 0:00:00, 3000, , 20, 
</pre>

<h3><a name="DictionaryListDataReaderHandler">Query(DictionaryList)</a></h3>
<p>Several Dictinary may be retrieved. DictionaryListDataReaderHandler is used as a DataReaderHandler.</p>

<h4>Seasar.Examples.Reference.ADO.SelectDictionaryList.dicon</h4>
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">&lt;</span><span class="html">components</span><span class="kwrd">&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">include</span> <span class="attr">path</span><span class="kwrd">="Seasar.Examples/Ado.dicon"</span> <span class="kwrd">/&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">name</span><span class="kwrd">="SelectDictionaryListClient"</span> <br /><span class="attr">class</span><span class="kwrd">="Seasar.Examples.Reference.ADO.SelectDictionaryListClient"</span><span class="kwrd">/&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">name</span><span class="kwrd">="SelectDictionaryListHandler"</span> <br /><span class="attr">class</span><span class="kwrd">="Seasar.Extension.ADO.Impl.BasicSelectHandler"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">property</span> <span class="attr">name</span><span class="kwrd">="Sql"</span><span class="kwrd">&gt;</span><br />"SELECT empno, ename, job, mgr, hiredate, sal, comm, deptno FROM emp"<span class="kwrd">&lt;/</span><span class="html">property</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">property</span> <span class="attr">name</span><span class="kwrd">="DataReaderHandler"</span><span class="kwrd">&gt;</span>
      <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">class</span><span class="kwrd">="Seasar.Extension.ADO.Impl.DictionaryListDataReaderHandler"</span><span class="kwrd">/&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">property</span><span class="kwrd">&gt;</span>
  <span class="kwrd">&lt;/</span><span class="html">component</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">components</span><span class="kwrd">&gt;</span>
</pre>

<h4>Seasar.Examples.Reference.ADO.SelectDictionaryListClient</h4>
C#
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">using</span> System;
<span class="kwrd">using</span> System.Collections;
<span class="kwrd">using</span> Seasar.Extension.ADO;
<span class="kwrd">using</span> Seasar.Framework.Container;
<span class="kwrd">using</span> Seasar.Framework.Container.Factory;

<span class="kwrd">namespace</span> Seasar.Examples.Reference.ADO
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> SelectDictionaryListClient
    {
        <span class="kwrd">private</span> <span class="kwrd">const</span> <span class="kwrd">string</span> PATH = <span class="str">"Seasar.Examples/Reference/ADO/SelectDictionaryList.dicon"</span>;

        <span class="kwrd">public</span> <span class="kwrd">void</span> Main()
        {
            IS2Container container = S2ContainerFactory.Create(PATH);
            container.Init();
            <span class="kwrd">try</span>
            {
                ISelectHandler handler = 
                    SelectHandler) container.GetComponent(<span class="str">"SelectDictionaryListHandler"</span>);
                IList result = (IList) handler.Execute(<span class="kwrd">null</span>);
                <span class="kwrd">for</span> (<span class="kwrd">int</span> i = 0; i &lt; result.Count; ++i)
                {
                    Console.Out.WriteLine(DictionaryUtil.ToDecorateString((IDictionary) result[i]));
                }
            }
            <span class="kwrd">finally</span>
            {
                container.Destroy();
            }
        }
    }
}
</pre>

<h4>Result:</h4>
<pre>
DEBUG 2006-06-19 23:43:24,749 [9] Logical connection opened
DEBUG 2006-06-19 23:43:24,765 [9] Logical connection closed
ename=SMITH, hiredate=1980/12/17 0:00:00, comm=null, deptno=20, job=CLERK, empno=7369,
 sal=800.00, mgr=7902
ename=ALLEN, hiredate=1981/02/20 0:00:00, comm=300.00, deptno=30, job=SALESMAN, empno=7499,
 sal=1600.00, mgr=7698
ename=WARD, hiredate=1981/02/22 0:00:00, comm=500.00, deptno=30, job=SALESMAN, empno=7521,
 sal=1250.00, mgr=7698
ename=JONES, hiredate=1981/04/02 0:00:00, comm=null, deptno=20, job=MANAGER, empno=7566,
 sal=2975.00, mgr=7839
ename=MARTIN, hiredate=1981/09/28 0:00:00, comm=1400.00, deptno=30, job=SALESMAN, empno=7654,
 sal=1250.00, mgr=7698
ename=BLAKE, hiredate=1981/05/01 0:00:00, comm=null, deptno=30, job=MANAGER, empno=7698,
 sal=2850.00, mgr=7839
ename=CLARK, hiredate=1981/06/09 0:00:00, comm=null, deptno=10, job=MANAGER, empno=7782,
 sal=2450.00, mgr=7839
ename=SCOTT, hiredate=1982/12/09 0:00:00, comm=null, deptno=20, job=ANALYST, empno=7788,
 sal=3000.00, mgr=7566
ename=KING, hiredate=1981/11/17 0:00:00, comm=null, deptno=10, job=PRESIDENT, empno=7839,
 sal=5000.00, mgr=null
ename=TURNER, hiredate=1981/09/08 0:00:00, comm=0.00, deptno=30, job=SALESMAN, empno=7844,
 sal=1500.00, mgr=7698
ename=ADAMS, hiredate=1983/01/12 0:00:00, comm=null, deptno=20, job=CLERK, empno=7876,
 sal=1100.00, mgr=7788
ename=JAMES, hiredate=1981/12/03 0:00:00, comm=null, deptno=30, job=CLERK, empno=7900,
 sal=950.00, mgr=7698
ename=FORD, hiredate=1981/12/03 0:00:00, comm=null, deptno=20, job=ANALYST, empno=7902,
 sal=3000.00, mgr=7566
ename=MILLER, hiredate=1982/01/23 0:00:00, comm=null, deptno=10, job=CLERK, empno=7934,
 sal=1300.00, mgr=7782
</pre>

<h3><a name="DictionaryDataReaderHandler">Query(Dictionary)</a></h3>
<p>Used to retrieve 1 Dictionary. DictionaryDataReaderHandler is used as a DataReaderHandler.</p>

<h4>Seasar.Examples.Reference.ADO.SelectDictionary.dicon</h4>
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">&lt;</span><span class="html">components</span><span class="kwrd">&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">include</span> <span class="attr">path</span><span class="kwrd">="Seasar.Examples/Ado.dicon"</span> <span class="kwrd">/&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">name</span><span class="kwrd">="SelectDictionaryClient"</span> <span class="attr">class</span><span class="kwrd">="Seasar.Examples.Reference.ADO.SelectDictionaryClient"</span><span class="kwrd">/&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">name</span><span class="kwrd">="SelectDictionaryHandler"</span> <span class="attr">class</span><span class="kwrd">="Seasar.Extension.ADO.Impl.BasicSelectHandler"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">property</span> <span class="attr">name</span><span class="kwrd">="Sql"</span><span class="kwrd">&gt;</span><br />"SELECT empno, ename, job, mgr, hiredate, sal, comm, deptno <br />FROM emp WHERE empno = @empno"<span class="kwrd">&lt;/</span><span class="html">property</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">property</span> <span class="attr">name</span><span class="kwrd">="DataReaderHandler"</span><span class="kwrd">&gt;</span>
      <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">class</span><span class="kwrd">="Seasar.Extension.ADO.Impl.DictionaryDataReaderHandler"</span><span class="kwrd">/&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">property</span><span class="kwrd">&gt;</span>
  <span class="kwrd">&lt;/</span><span class="html">component</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">components</span><span class="kwrd">&gt;</span>
</pre>

<h4>Seasar.Examples.Reference.ADO.SelectDictionaryClient</h4>
C#
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">using</span> System;
<span class="kwrd">using</span> System.Collections;
<span class="kwrd">using</span> Seasar.Extension.ADO;
<span class="kwrd">using</span> Seasar.Framework.Container;
<span class="kwrd">using</span> Seasar.Framework.Container.Factory;

<span class="kwrd">namespace</span> Seasar.Examples.Reference.ADO
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> SelectDictionaryClient
    {
        <span class="kwrd">private</span> <span class="kwrd">const</span> <span class="kwrd">string</span> PATH = <span class="str">"Seasar.Examples/Reference/ADO/SelectDictionary.dicon"</span>;

        <span class="kwrd">public</span> <span class="kwrd">void</span> Main()
        {
            IS2Container container = S2ContainerFactory.Create(PATH);
            container.Init();
            <span class="kwrd">try</span>
            {
                ISelectHandler handler =
                    (ISelectHandler) container.GetComponent(<span class="str">"SelectDictionaryHandler"</span>);
                IDictionary result = (IDictionary) handler.Execute(<span class="kwrd">new</span> <span class="kwrd">object</span>[] { 7788 });
                Console.Out.WriteLine(DictionaryUtil.ToDecorateString(result));
            }
            <span class="kwrd">finally</span>
            {
                container.Destroy();
            }
        }
    }
}
</pre>

<h4>Result:</h4>
<pre>
DEBUG 2006-06-19 23:46:25,640 [9] Logical connection opened
DEBUG 2006-06-19 23:46:25,656 [9] Logical connection closed
ename=SCOTT, hiredate=1982/12/09 0:00:00, comm=null, deptno=20, job=ANALYST, empno=7788,
 sal=3000.00, mgr=7566
</pre>

<h3><a name="BasicUpdateHandler">Update</a></h3>
<p>BasicUpdateHandler is used in an update. It has the following properties:</p>

<h4>Seasar.Extension.ADO.Impl.BasicUpdateHandler</h4>
<table border="1">
<tr bgcolor="#d1f3f4" align="center">
<th width="96">Property</th>
<th width="167">Description</th>
<th width="461">S2Container Example</th>
</tr>
<tr>
<td>DataSource</td>
<td>DataSource</td>
<td>Set normally by default</td>
</tr>
<tr>
<td>Sq‚Œ</td>
<td>SQL command to execute</td>
<td>&quot;UPDATE emp SET ename = @ename WHERE empno = @empno &quot;</td>
</tr>
</table>

<h4>Seasar.Examples.Reference.ADO.Update.dicon</h4>
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">&lt;</span><span class="html">components</span><span class="kwrd">&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">include</span> <span class="attr">path</span><span class="kwrd">="Seasar.Examples/Ado.dicon"</span> <span class="kwrd">/&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">name</span><span class="kwrd">="UpdateClient"</span> <span class="attr">class</span><span class="kwrd">="Seasar.Examples.Reference.ADO.UpdateClient"</span><span class="kwrd">/&gt;</span>
  <span class="kwrd">&lt;</span><span class="html">component</span> <span class="attr">name</span><span class="kwrd">="UpdateHandler"</span> <span class="attr">class</span><span class="kwrd">="Seasar.Extension.ADO.Impl.BasicUpdateHandler"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">property</span> <span class="attr">name</span><span class="kwrd">="Sql"</span><span class="kwrd">&gt;</span>"UPDATE emp SET ename = @ename WHERE empno = @empno"<span class="kwrd">&lt;/</span><span class="html">property</span><span class="kwrd">&gt;</span>
  <span class="kwrd">&lt;/</span><span class="html">component</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">components</span><span class="kwrd">&gt;</span>
</pre>

<h4>Seasar.Examples.Reference.ADO.UpdateClient</h4>
C#
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">using</span> System;
<span class="kwrd">using</span> Seasar.Extension.ADO;
<span class="kwrd">using</span> Seasar.Framework.Container;
<span class="kwrd">using</span> Seasar.Framework.Container.Factory;

<span class="kwrd">namespace</span> Seasar.Examples.Reference.ADO
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> UpdateClient
    {
        <span class="kwrd">private</span> <span class="kwrd">const</span> <span class="kwrd">string</span> PATH = <span class="str">"Seasar.Examples/Reference/ADO/Update.dicon"</span>;

        <span class="kwrd">public</span> <span class="kwrd">void</span> Main()
        {
            IS2Container container = S2ContainerFactory.Create(PATH);
            container.Init();
            <span class="kwrd">try</span>
            {
                IUpdateHandler handler = (IUpdateHandler) container.GetComponent(<span class="str">"UpdateHandler"</span>);
                <span class="kwrd">int</span> result = (<span class="kwrd">int</span>) handler.Execute(<span class="kwrd">new</span> <span class="kwrd">object</span>[] { <span class="str">"SCOTT"</span>, 7788 });
                Console.Out.WriteLine(result);
            }
            <span class="kwrd">finally</span>
            {
                container.Destroy();
            }
        }
    }
}
</pre>
<h4>Result:</h4>
<pre>
DEBUG 2006-06-19 23:55:46,999 [9] Logical connection opened
DEBUG 2006-06-19 23:55:47,031 [9] Logical connection closed
1
</pre>

<h2><a name="NullValue">NULL Handling</a></h2>
<p>When mapping NET Framework type to a database column, if there is a column with a value NULL, exception will be thrown because when .NET Framework type is of a System.Int32 construct, NULL is not possible.
</p>
<p>To use NULL in a column, refer to the following sections:
<ul>
<li><a href="#NullValueNHibernate">Nullable in NHibernateContrib</a></li>
<li><a href="#NullValueSqlTypes">Null in System.Data.SqlTypes</a></li>
<li><a href="#NullValueNullable">System.Nullable(.NET 2.0 or higher)</a></li>
</ul>
Following table shows the relationship with the above methods with the database datatypes.
</p>
<table border="1">
<tr bgcolor="#d1f3f4" align="center">
<th>System.Data.DbType</th><th>.NET Framework type</th><th>Nullables</th><th>System.Data.SqlTypes</th><th>System.Nullable</th></tr>
<tr>
<td>Boolean</td><td>Boolean</td><td>NullableBoolean</td><td>SqlBoolean</td><td>Nullable&lt;Boolean&gt;</td></tr>
<td>Byte</td><td>Byte</td><td>NullableByte</td><td>SqlByte</td><td>Nullable&lt;Byte&gt;</td></tr>
<td>Binary</td><td>Byte[]</td><td>NullableByte</td><td>SqlBinary</td><td>Nullable&lt;Byte&gt;</td></tr>
<td>DateTime</td><td>DateTime</td><td>NullableDateTime</td><td>SqlDateTime</td><td>Nullable&lt;DateTime&gt;</td></tr>
<td>Decimal</td><td>Decimal</td><td>NullableDecimal</td><td>SqlDecimal</td><td>Nullable&lt;Decimal&gt;</td></tr>
<td>Double</td><td>Double</td><td>NullableDouble</td><td>SqlDouble</td><td>Nullable&lt;Double&gt;</td></tr>
<td>Single</td><td>Single</td><td>NullableSingle</td><td>SqlSingle</td><td>Nullable&lt;Single&gt;</td></tr>
<td>Guid</td><td>Guid</td><td>NullableGuid</td><td>SqlGuid</td><td>Nullable&lt;Guid&gt;</td></tr>
<td>Int16</td><td>Int16</td><td>NullableInt16</td><td>SqlInt16</td><td>Nullable&lt;Int16&gt;</td></tr>
<td>Int32</td><td>Int32</td><td>NullableInt32</td><td>SqlInt32</td><td>Nullable&lt;Int32&gt;</td></tr>
<td>Int64</td><td>Int64</td><td>NullableInt64</td><td>SqlInt64</td><td>Nullable&lt;Int64&gt;</td></tr>
<td>String</td><td>String</td><td>-</td><td>SqlString</td><td>-</td></tr>
<td><span style="text-decoration:line-through">Time</span></td><td><span style="text-decoration:line-through">TimeSpan</span></td><td>-</td><td>-</td><td><span style="text-decoration:line-through">Nullable&lt;TimeSpan&gt;</span></td></tr>
<td>SByte</td><td>SByte</td><td>NullableSByte</td><td>-</td><td>Nullable&lt;SByte&gt;</td></tr>
</table>

<h3><a name="NullValueNHibernate">Nullable in NHibernateContrib</a></h3>
<p>To use Nullables in NHibernateContrib, add the following file (assemby) references.
<ul>
<li>s2container.net/lib/Nullables.dll</li>
</ul>
</p>
<p>Example usage in a source file:
<ul>
<li>Import namespace Nullables</li>
<li>To check if it is a NULL, use the HasValue property</li>
<li>To retrieve a value, use the Value property</li>
</ul>
</p>

C#
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">using</span> System.Text;
<span class="kwrd">using</span> Nullables;

<span class="kwrd">namespace</span> Foo
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> Bar
    {
        <span class="kwrd">private</span> NullableInt64 id;

        <span class="kwrd">public</span> NullableInt64 Id
        {
            get { <span class="kwrd">return</span> id; }
            set { id = <span class="kwrd">value</span>; }
        }

        <span class="kwrd">private</span> NullableBoolean boolType;

        <span class="kwrd">public</span> NullableBoolean BoolType
        {
            get { <span class="kwrd">return</span> boolType; }
            set { boolType = <span class="kwrd">value</span>; }
        }

        <span class="kwrd">public</span> <span class="kwrd">override</span> <span class="kwrd">string</span> ToString()
        {
            StringBuilder buf = <span class="kwrd">new</span> StringBuilder();
            buf.Append(id.HasValue ? id.Value.ToString() : <span class="str">"NULL"</span>).Append(<span class="str">", "</span>);
            buf.Append(boolType.HasValue ? boolType.Value.ToString() : <span class="str">"NULL"</span>).Append(<span class="str">", "</span>);
            <span class="kwrd">return</span> buf.ToString();
        }
    }
}
</pre>

<h3><a name="NullValueSqlTypes">Null in System.Data.SqlTypes</a></h3>
<p>Example usage in a source file:
<ul>
<li>Import namespace System.Data.SqlTypes</li>
<li>To check if it is a NULL, use the IsNull property</li>
<li>To retrieve a value, use the Value property</li>
</ul>
</p>

C#
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">using</span> System.Data.SqlTypes;
<span class="kwrd">using</span> System.Text;

<span class="kwrd">namespace</span> Foo
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> Bar
    {
        <span class="kwrd">private</span> SqlInt64 id;

        <span class="kwrd">public</span> SqlInt64 Id
        {
            get { <span class="kwrd">return</span> id; }
            set { id = <span class="kwrd">value</span>; }
        }

        <span class="kwrd">private</span> SqlBoolean boolType;

        <span class="kwrd">public</span> SqlBoolean BoolType
        {
            get { <span class="kwrd">return</span> boolType; }
            set { boolType = <span class="kwrd">value</span>; }
        }

        <span class="kwrd">public</span> <span class="kwrd">override</span> <span class="kwrd">string</span> ToString()
        {
            StringBuilder buf = <span class="kwrd">new</span> StringBuilder();
            buf.Append(!id.IsNull ? id.Value.ToString() : <span class="str">"NULL"</span>).Append(<span class="str">", "</span>);
            buf.Append(!boolType.IsNull ? boolType.Value.ToString() : <span class="str">"NULL"</span>).Append(<span class="str">", "</span>);
            <span class="kwrd">return</span> buf.ToString();
        }
    }
}
</pre>

<h3><a name="NullValueNullable">System.Nullable(.NET 2.0 or higher)</a></h3>
<p>.NET Framework 2.0 or higher supports Nullable datatype.</p>
<p>Example usage in a source file:
<ul>
<li>Import namespace System</li>
<li>To check if the value is a NULL, use the HasValue property</li>
<li>To retrieve a value, use the Value property</li>
</ul>
</p>

C#
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">using</span> System;
<span class="kwrd">using</span> System.Text;

<span class="kwrd">namespace</span> Foo
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> Bar
    {
        <span class="kwrd">private</span> Nullable&lt;Int64&gt; id;

        <span class="kwrd">public</span> Nullable&lt;Int64&gt; Id
        {
            get { <span class="kwrd">return</span> id; }
            set { id = <span class="kwrd">value</span>; }
        }

        <span class="kwrd">private</span> Nullable&lt;Boolean&gt; boolType;

        <span class="kwrd">public</span> Nullable&lt;Boolean&gt; BoolType
        {
            get { <span class="kwrd">return</span> boolType; }
            set { boolType = <span class="kwrd">value</span>; }
        }

        <span class="kwrd">public</span> <span class="kwrd">override</span> <span class="kwrd">string</span> ToString()
        {
            StringBuilder buf = <span class="kwrd">new</span> StringBuilder();
            buf.Append(id.HasValue ? id.Value.ToString() : <span class="str">"NULL"</span>).Append(<span class="str">", "</span>);
            buf.Append(boolType.HasValue ? boolType.Value.ToString() : <span class="str">"NULL"</span>).Append(<span class="str">", "</span>);
            <span class="kwrd">return</span> buf.ToString();
        }
    }
}
</pre>

<h2><a name="ParameterMark">Parameter Marker(@, :, ?)</a></h2>
<p>Parameter markers that may be used in a SQL command depends on the ADO.NET data provider. As an example, SqlClient uses "@parmname", OracleClient uses ":parmname", OleDb uses "?", and Odbc uses "?".</p>
<p>S2ADO allows SQL commands to be independent of data provider by changing parameter markers depending on a data provider used.
</p>
<p>Following is an example:
<table border="1">
<tr bgcolor="#d1f3f4" align="center">
<th>Data Provider</th>
<th>SQL command</th>
</tr>
<tr>
<td>(User's SQL command)</td>
<td>SELECT * FROM emp WHERE empno = @empno OR empno = :empno OR empno = ?</td>
</tr>
<tr>
<td>SqlClient</td>
<td>SELECT * FROM emp WHERE empno = @0 OR empno = @1 OR empno = @2</td>
</tr>
<tr>
<td>OracleClient</td>
<td>SELECT * FROM emp WHERE empno = :0 OR empno = :1 OR empno = :2</td>
</tr>
<tr>
<td>OleDb</td>
<td>SELECT * FROM emp WHERE empno = ? OR empno = ? OR empno = ?</td>
</tr>
<tr>
<td>Odbc</td>
<td>SELECT * FROM emp WHERE empno = ? OR empno = ? OR empno = ?</td>
</tr>
</table>
</p>
<p>Note: Several types of parameter markers may be used in a SQL command but for readability, it is recommended to use one type.</p>


<!-- document end -->
<!-- don't edit start -->
</td>
          <td width=14><img height=14 alt="" src="images/spacer.gif" 
            width=14></td></tr>
        <tr>
          <td width=14><img height=30 alt="" src="images/spacer.gif" 
            width=14></td>
          <td width=766><img height=30 alt="" src="images/spacer.gif" 
            width=592></td></tr>
        <tr>
          <td width=14><img height=14 alt="" src="images/spacer.gif" 
            width=14></td>
<td class=copyright><table cellSpacing=0 cellPadding=0 width=736><tr><td align="left">Trans. by H.Ozawa</td><td align="right">Copyright&copy; 2004-2006, The Seasar Foundation and the others. All rights reserved.</td></tr></table></td>
</tr></table>
    <td class=backright vAlign=top align=left>&nbsp;</td></tr>
  <tr>
    <td class=backunder vAlign=top align=left width=780 height=16>&nbsp;</td>
    <td class=backcorner vAlign=top align=left 
height=16>&nbsp;</td></tr></tbody></table>
<!-- don't edit end -->
</body></html>